{{- $json := "" }}
{{- $skin := printf "model/script/css-foot.css" }}
{{- $core := printf "_core/script/css-foot.css" }}
{{- $rpath := "" }}
{{- $site := .site }}

{{- if resources.Get $skin -}}
    {{ $rskin := resources.Get $skin }}
    {{ $rcore := resources.Get $core }}
    {{ $rpath = slice $rskin $rcore | resources.Concat "static/script/critical.css" }}
{{- else -}}
    {{ $rpath = resources.Get $core }}
{{- end -}}


{{- with resources.Get $rpath -}}
    {{- if eq hugo.Environment "development" }}
        <link id="{{ $site.Params.theme }}-style-defer" rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous"> 
    {{ else }}
        {{- with . | minify | fingerprint }}
            <link id="{{ $site.Params.theme }}-style-defer" rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous">
        {{- end }}
    {{ end }}
{{- end -}}